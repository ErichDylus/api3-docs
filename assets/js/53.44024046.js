(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{547:function(t,s,a){"use strict";a.r(s);var e=a(8),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"frontmatter-title"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[t._v("#")]),t._v(" "+t._s(t.$frontmatter.title))]),t._v(" "),a("TocHeader"),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#markdown-link-check-optional"}},[t._v("markdown-link-check (optional)")])]),a("li",[a("a",{attrs:{href:"#link-validator"}},[t._v("Link Validator")])]),a("li",[a("a",{attrs:{href:"#understand-deploy-sh"}},[t._v("Understand deploy.sh")])]),a("li",[a("a",{attrs:{href:"#deploying"}},[t._v("Deploying")])])])]),a("p"),t._v(" "),a("p",[t._v("The project docs are deployed to the remote repo "),a("strong",[t._v("gh-pages branch")]),t._v(" using the "),a("strong",[t._v("deploy.sh")]),t._v(" bash script. The script is run locally from the "),a("strong",[t._v("main")]),t._v(" branch which will be used for the build. Local "),a("strong",[t._v("main")]),t._v(" must be up-to-date with all changes by contributors.")]),t._v(" "),a("h2",{attrs:{id:"markdown-link-check-optional"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#markdown-link-check-optional"}},[t._v("#")]),t._v(" markdown-link-check (optional)")]),t._v(" "),a("p",[t._v("Before building be sure to test all hyperlinks in the project. The test commands are only good for hyperlinks in markdown files. Hyperlinks inside custom Vue components must be tested manually.")]),t._v(" "),a("p",[t._v("The following checks all production version folders including "),a("em",[t._v("/dev")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" test:links:prod\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("A separate command checks the "),a("em",[t._v("/next")]),t._v(" folder which is not considered production ready. It should be noted that the GitHub Action "),a("RouterLink",{attrs:{to:"/dev/github-actions.html#markdown-link-check"}},[t._v("markdown-link-check")]),t._v(" to check hyperlinks never checks the "),a("em",[t._v("/next")]),t._v(" folder.")],1),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" test:links:next\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h2",{attrs:{id:"link-validator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#link-validator"}},[t._v("#")]),t._v(" Link Validator")]),t._v(" "),a("p",[t._v("Link Validator validates links with or without attached anchors. It is more effective than markdown-link-check though it is best not to ignore the use of markdown-link-check. See "),a("RouterLink",{attrs:{to:"/dev/link-validator.html"}},[t._v("Link Validator")]),t._v(" to run its Node.js script.")],1),t._v(" "),a("h2",{attrs:{id:"understand-deploy-sh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#understand-deploy-sh"}},[t._v("#")]),t._v(" Understand deploy.sh")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Builds a static website and places it in "),a("strong",[t._v(".vuepress/dist")]),t._v(". The "),a("strong",[t._v("/dist")]),t._v(" folder is deleted if it exists and re-created.")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# build the docs")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run docs:build\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("The deployment must be run from the .vuepress/dist folder.")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# navigate to the build output directory")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs/.vuepress/dist\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("The .vuepress/dist folder is staged to be pushed.")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# api3dao/api3-doc uses the main branch as default.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git init must start with a main branch so gh-pages will")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "hang" off of it.')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" init --initial-branch"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -A\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit -m "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Deploying a locally built /dist folder to main:gh-pages as its own commit history.'")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("A git push is "),a("em",[t._v("forced")]),t._v(" onto the remote branch gh-pages.")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# If you are deploying to https://<USERNAME>.github.io/<REPO>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NEVER push to main, use main:gh-pages.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push -f git@github.com:api3dao/api3-docs.git main:gh-pages\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])]),t._v(" "),a("h2",{attrs:{id:"deploying"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deploying"}},[t._v("#")]),t._v(" Deploying")]),t._v(" "),a("p",[t._v("It is important to pull down the "),a("strong",[t._v("main branch")]),t._v(" (step 3) after the remote master repo has been merged with all contributions. This insures the local build of the /dist folder gets the latest from all contributors.")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Verify the repo target in "),a("code",[t._v("deploy.sh")]),t._v(" is set to "),a("code",[t._v("api3dao/api3-docs")]),t._v(". It is unlikely this has changed since the script went through final testing back in Feb 2021.")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Verify only, do not execute outside the deploy.sh script.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push -f git@github.com:api3dao/api3-docs.git main:gh-pages\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])])]),t._v(" "),a("p",[t._v("2a. (optional) Run "),a("code",[t._v("yarn test:links:prod")]),t._v(" to verify hyperlinks.\n2a. Run the "),a("RouterLink",{attrs:{to:"/dev/link-validator.html"}},[t._v("Link Validator")]),t._v(" to verify hyperlinks and any anchors.")],1),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[t._v("Git")]),t._v(" "),a("ul",[a("li",[t._v("Commit and push local work to the remote repo.")]),t._v(" "),a("li",[t._v("From the remote repo, merge contributing branches to main.")]),t._v(" "),a("li",[t._v("Return to your local repo and switch to the main branch.")]),t._v(" "),a("li",[t._v("Pull remote main to local main.")])])]),t._v(" "),a("li",[a("p",[t._v("Verify the proper versions ("),a("strong",[t._v("versions key")]),t._v(") are listed in config.json. Currently there is only one version "),a("code",[t._v("pre-alpha")]),t._v(".")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("  versions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("'pre-alpha'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("'/pre-alpha/'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("Deploy")]),t._v(" "),a("ul",[a("li",[t._v("Deploy from a desired local branch, usually "),a("strong",[t._v("main")]),t._v(".")]),t._v(" "),a("li",[t._v("Execute "),a("code",[t._v("deploy.sh")]),t._v(" to deploy.")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd <root of project>")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Verify the branch that is set.")]),t._v("\n% /Users/warren/DEV/api3-docs "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" deploy.sh\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])])])])],1)}),[],!1,null,null,null);s.default=n.exports}}]);